<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.heeexy.example.dao.StickDao">


    <!--获取板块列表-->
    <select id="listStick" resultType="com.alibaba.fastjson.JSONObject">
      SELECT
        stick_id stickId,stick_name stickName
      FROM stick
    </select>

    <!--获取帖子置顶情况-->
    <select id="listStickById" resultType="com.alibaba.fastjson.JSONObject">
        SELECT
          stick_id stickId,post_id postId
        FROM post_stick
        <where>
            post_id = #{postId}
            <if test="stickId != null and stickId !='' " >
                AND stick_id = #{stickId}
            </if>
        </where>

    </select>

    <!--获取板块置顶帖子ID-->
    <select id="getPostById" resultType="com.alibaba.fastjson.JSONObject">
        SELECT
          post_id postId
        FROM post_stick
        WHERE stick_id = #{stickId}
    </select>

    <!--置顶帖子-->
    <insert id="addPostStick">
      INSERT INTO post_stick
        (post_id, stick_id)
      VALUES
        (#{postId},#{stickId})
    </insert>

    <!--取消帖子置顶-->
    <delete id="deletePostStick">
      DELETE
      FROM post_stick
      WHERE post_id = #{postId}
    </delete>

</mapper>
